# AGENT – راهنمای ایجنت‌ها (الزامات مشترک)

## هدف
بازنویسی پوشه `server` به پروژه `django_server` با کمترین پیچیدگی و تنها با OpenAI.
- بدون Real-Time/Streaming.
- فقط OpenAI (هیچ provider دیگری مجاز نیست).
- سادگی حداکثری و خوانایی کد.
- همه ایجنت‌ها **باید** از فایل «کاستوم مدل» استفاده کنند (رجوع کنید به `MODEL_SETUP.md`).
- کلاینت OpenAI باید **هم API Base URL** و **هم API Key** را بپذیرد (رجوع کنید به `VOICE_CONVERSATION.md` بخش “کلاینت OpenAI”).

## قواعد هم‌زمانی (بدون کانفلیکت)
- هر ایجنت فقط در پوشهٔ خودش خروجی تولید/ویرایش می‌کند:
  - `apps/llm/`
  - `apps/embedding/`
  - `apps/stt/`
  - `apps/tts/`
  - `apps/conversation/`
  - `apps/admin_api/`
- اسناد سطح پروژه:
  - هر ایجنت فقط **بخش خودش** را در `API_DOCS.md` به‌روزرسانی می‌کند:
    - بخش‌های مجاز: 
      - LLM → «/api/llm»
      - Embedding → «/api/embedding»
      - STT → «/api/stt»
      - TTS → «/api/tts»
      - Conversation → «/api/conversation»
      - Admin → «/api/admin»
  - `README.md` و `ROADMAP.md` فقط توسط «Agent پایه/ساختار» ویرایش می‌شوند (در صورت نیاز هماهنگ کنید).
- هیچ ایجنتی فایل‌های ایجنت‌های دیگر را تغییر نمی‌دهد.

## قرارداد خروجی
هر ایجنت باید همراه کد خودش، یک `FEATURES.md` داخل پوشهٔ اپ تولید کند که شامل:
- هدف اپ و مرزبندی وظایف
- فهرست Endpointها (مسیر، ورودی/خروجی، خطاها)
- مدل‌های مجاز (از `.env`) و مدل‌های پیش‌فرض
- تصمیمات ساده‌سازی و حد و مرزها

## مدل‌ها (الزام)
- دسته‌ها: `text_gen`, `text2text`, `embedding`, `tts`, `stt`
- تنظیمات فقط از `.env` (لیست‌ها و دیفالت‌ها)
- درخواست می‌تواند «model» را override کند؛ اگر نامعتبر بود از دیفالت استفاده شود.
- جزییات در `MODEL_SETUP.md`.

## ممنوعیات
- Real-Time/Streaming/WebSocket
- هر نوع provider غیر از OpenAI
- ساخت abstraction‌های غیرضروری، الگوهای پیچیده، و وابستگی‌های اضافی

## کیفیت و سادگی
- ساده‌ترین پیاده‌سازی که عملکرد و کیفیت را حفظ کند.
- مدیریت خطا واضح و حداقلی، پیام‌های خطا قابل فهم.
- بدون تنظیم Docker یا زیرساخت داخل این فاز.
