# MODEL_SETUP – کاستوم مدل‌ها

## هدف
استاندارد واحد برای انتخاب مدل‌ها در کل پروژه، توسط همهٔ ایجنت‌ها.

## دسته‌ها
- text_gen: تولید متن/چت
- text2text: پردازش متن به متن (instruct)
- embedding: تولید بردارهای تع嵌د
- stt: گفتار به متن (Whisper)
- tts: متن به گفتار (OpenAI TTS)

## متغیرهای محیطی موردنیاز (.env)
- OPENAI_API_KEY
- OPENAI_BASE_URL
- TEXT_GEN_MODELS, DEFAULT_TEXT_GEN_MODEL
- TEXT2TEXT_MODELS, DEFAULT_TEXT2TEXT_MODEL
- EMBED_MODELS, DEFAULT_EMBED_MODEL
- STT_MODELS, DEFAULT_STT_MODEL
- TTS_MODELS, DEFAULT_TTS_MODEL

### قرارداد مقداردهی
- لیست‌ها «کاما-جدا» هستند: مثلا `gpt-3.5-turbo,gpt-4`
- دیفالت هر دسته **باید** داخل همان لیست باشد.
- اگر دیفالت نامعتبر بود، اولین آیتم لیست به‌عنوان fallback استفاده می‌شود.
- اگر لیست خالی باشد، ایجنت باید خطای پیکربندی برگرداند (خطای واضح و کوتاه).

## قرارداد انتخاب مدل
1) درخواست می‌تواند `model` بدهد.
2) اگر `model` در لیست دسته مربوطه بود → همان استفاده می‌شود.
3) در غیراینصورت → مدل دیفالت دسته.
4) اگر دیفالت وجود نداشت → خطای پیکربندی.

## الزامات ایجنت‌ها
- همهٔ ایجنت‌ها باید **تنها** از همین قرارداد تبعیت کنند.
- هیچ لیستی خارج از `.env` تعریف نشود.
- نام دسته‌ها و کلیدها ثابت‌اند.
